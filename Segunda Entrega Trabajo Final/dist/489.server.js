"use strict";exports.id=489,exports.ids=[489,825],exports.modules={201:(t,o,e)=>{e.d(o,{Z:()=>d});const n=JSON.parse('{"type":"service_account","project_id":"backend-cfb0d","private_key_id":"96785c0e9e3e41782ad1341f2e4750205e7b7c25","private_key":"-----BEGIN PRIVATE KEY-----\\nMIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQDjMSVhG4tniLNn\\nHXXDz6ap0m0k2rzo+ft5RMZiSNGRRyO1k3qsL79/Xnw2RuIEGXRzxreybv69KycI\\ns8THqkCgjjxiYm/LQyfgXZ9u2Cb+5Ba5x1qstQ3r33Thny09EUCzYQsmHQr8ni+C\\nnm4GQCE8bTJ5ngV4J+IgxoDvngAuiLg9rtxT0fcSfpKgTiP8QMEArPTGLdxrnOjR\\n2KVJmVpzYqkLdnV6vlm2u9BX6pem+b/+ZEk3C/5XU+kOVndaygLpXX8eH/ipKoZo\\nHJxUehuvLfaVLvYcvDmI4YxPqULNXlkIy+JvV11AOoRzpatUUMUWFDDOril26eDA\\nKrrxVCgpAgMBAAECggEADNrLZMPSVs62KOnSr5w8j7wJYyYRvYRkcUt+BpJccjIC\\nYBwauyqd9RLXaBpJYEZA76qRGwJa/UDXbe9+/TWhv7vgiIgNj4SKmXAurM7D4RTu\\ngL85/w7k/WE4u6neHUgQPz4Iy5Sl2h6IrWUxsD6ZatH6YsV5RX/LNIPKyJQJ6lgE\\newh5MBLhhkgw/C1ByzzyJENby3GGKXdpvNuwAkJ6j2eASebF7dIyHCK9elS7oWWb\\niX1Q/zCmwHm1CYwTk2XM+IMQDlXI/+K4/X8an6sa7UCH6AxM0V75flaczK9Z+1yq\\nGdXOB+ulsJH+4NNrp1O5ftnsaSfG+gEM96CZ2Q1w0QKBgQDyq2T8R+jWbQMxtrBU\\nYRgglAOsMizog1IqsAm7BAKQ+dwO86DGWlQ7YnX2vDymfRKsSZ+ZnGEPWHt6LIvL\\n6JuDKVphOvMdr2vc77OUhkKOe/v0EQvgtlJnxlG3vYvuojjWPr6FCGmlQxJOXopG\\nJKV3/sFJnBS4VWea31GHaLV/eQKBgQDvrBg0Y9NFNTQLV0h/8hhQ8qDxd2Q66/0q\\nNX035BdvCPBCXs0TITMpIvboBgADXQabFzwR9NZ7qNGdYxvFkeVLMxHTYIPqIEup\\nnoM0Zvs7ZnnXU+QzGazWnTsnpUVMdMPXsDIM4UtGN5oTNqofjaer8Yo8ZKofZZhm\\nx5oTp1JSMQKBgQDn5Pd8ya7r8YKC6ER6bcpjn24fCFe33X4QgubZiwx0xAARXaj+\\nw2UI1p9JqDoBEzZb44MbhL+PrYtZheYVdnPdlA/lKDMY5ACcQYeHYAGMLVjos715\\nAGGg/3gpsH1fDjBoM89WS2LBZWXB9EAIpY5mK9FDaV63hA2chtlfH6WJaQKBgQCR\\nHZE2P28PS2xspXeXSH1indXG/nQonPSXlvVvXuK1byMR/JaMy6BPewUmbWOapbu3\\nMfVEJgurqgbpFbYeBP1hb9WON7UHkHBfjkOA+g2J5L1HHFtieVxGQcMseQwhg92E\\nfgF//PV32Xinw4R0QG/SUxhRAt5izj/dk2N+HORiMQKBgQCibBvsmiIDs2O57q+/\\n7GV7PlJPTcHln/dIKCOE0x8i0lLoPdcZ67rDKcDMBFVA2jimyUnYZtZM3EViFBqo\\nuMkm6R/mkZZ7gP+N6rV3+qeR+v6A+zeO2LhmkH9ThykcbPwX3h+Tcydjxs/G9IgM\\n7YpKoVT8C5IbTRsWrZE70AhYrw==\\n-----END PRIVATE KEY-----\\n","client_email":"firebase-adminsdk-8diz3@backend-cfb0d.iam.gserviceaccount.com","client_id":"100394747039092363371","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_x509_cert_url":"https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-8diz3%40backend-cfb0d.iam.gserviceaccount.com"}');var c=e(509),r=e.n(c);const i=n,d=class{constructor(t){this.collection=t,this.connect()}connect(){try{0===r().apps.length&&(r().initializeApp({credential:r().credential.cert(i)}),console.log("connected to firebase"))}catch(t){console.log(t)}}}},489:(t,o,e)=>{e.r(o),e.d(o,{default:()=>l});var n=e(201),c=e(509),r=e.n(c),i=e(825),d=function(t,o,e,n){return new(e||(e=Promise))((function(c,r){function i(t){try{s(n.next(t))}catch(t){r(t)}}function d(t){try{s(n.throw(t))}catch(t){r(t)}}function s(t){var o;t.done?c(t.value):(o=t.value,o instanceof e?o:new e((function(t){t(o)}))).then(i,d)}s((n=n.apply(t,o||[])).next())}))};class s extends n.Z{constructor(){super("carts")}createNewCart(){return d(this,void 0,void 0,(function*(){try{return{cartCreated:yield r().firestore().collection(this.collection).add({timestamp:Date.now(),products:[]}),msg:"Cart succesfully created!"}}catch(t){console.log("Method createNewCart: ",t)}}))}checkIfCartExists(t){return d(this,void 0,void 0,(function*(){try{const o=yield r().firestore().collection(this.collection).doc(t.toString());return void 0!==(yield o.get()).data()&&o}catch(t){console.log("Method addToCartById: ",t)}}))}deleteCartById(t){return d(this,void 0,void 0,(function*(){try{const o=yield this.checkIfCartExists(t);if(!o)return-2;o.delete()}catch(t){console.log("Method cartDeleteById: ",t)}}))}getProductsByCartId(t){return d(this,void 0,void 0,(function*(){try{const o=yield this.checkIfCartExists(t);return o?(yield o.get()).data():{error:"Cart not found"}}catch(t){console.log(t)}}))}addProductsById(t,o){return d(this,void 0,void 0,(function*(){try{const e=yield this.checkIfCartExists(t);return e?!0===(yield i.default.checkProductInCollection(o.id))?(e.update({products:r().firestore.FieldValue.arrayUnion(o)}),{msg:"Product succesfully added."}):{msg:"Product not found in products collection."}:{error:"Cart not found"}}catch(t){console.log(t)}}))}deleteProductByCartId(t,o){return d(this,void 0,void 0,(function*(){try{const e=yield this.checkIfCartExists(t);if(e){return 0===(yield e.get()).data().products.filter((t=>t.id===o)).length?{error:`Product id: ${o} not found.`}:(yield r().firestore().collection(this.collection).doc(t.toString()).update({products:r().firestore.FieldValue.arrayRemove({id:o})}),{msg:"Product succesfully deleted."})}return{error:"Cart not found"}}catch(t){console.log(t)}}))}}const l=new s},825:(t,o,e)=>{e.r(o),e.d(o,{default:()=>s});var n=e(201),c=e(509),r=e.n(c),i=function(t,o,e,n){return new(e||(e=Promise))((function(c,r){function i(t){try{s(n.next(t))}catch(t){r(t)}}function d(t){try{s(n.throw(t))}catch(t){r(t)}}function s(t){var o;t.done?c(t.value):(o=t.value,o instanceof e?o:new e((function(t){t(o)}))).then(i,d)}s((n=n.apply(t,o||[])).next())}))};class d extends n.Z{constructor(){super("products")}getAll(){return i(this,void 0,void 0,(function*(){try{const t=yield r().firestore().collection(this.collection).get();return{itemsData:t.docs.map((t=>t.data())),itemsId:t.docs.map((t=>t.id))}}catch(t){console.log(t)}}))}checkProductInCollection(t){return i(this,void 0,void 0,(function*(){try{return!!(yield r().firestore().collection(this.collection).doc(t.toString()).get()).exists||{error:"Product not found"}}catch(t){console.log(t)}}))}getById(t){return i(this,void 0,void 0,(function*(){try{return!0===(yield this.checkProductInCollection(t))?(yield r().firestore().collection(this.collection).doc(t.toString()).get()).data():{error:"Product not found"}}catch(t){console.log(t)}}))}addProduct(t){return i(this,void 0,void 0,(function*(){try{return yield r().firestore().collection(this.collection).add(t)}catch(t){console.log(t)}}))}updateProduct(t,o){return i(this,void 0,void 0,(function*(){try{return!0===(yield this.checkProductInCollection(t))?(yield r().firestore().collection(this.collection).doc(t.toString()).update(o),{msg:"Product Updated"}):{msg:"Product not found in products collection."}}catch(t){console.log(t)}}))}deleteProduct(t){return i(this,void 0,void 0,(function*(){try{return!0===(yield this.checkProductInCollection(t))?(yield r().firestore().collection(this.collection).doc(t.toString()).delete(),{msg:"Product Deleted"}):{msg:"Product not found in products collection."}}catch(t){console.log(t)}}))}}const s=new d}};